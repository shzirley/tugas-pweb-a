<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Submit Form Without Page Refresh</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
  <main>
    <div class="container">
      <h2>Contact Us</h2>
      <form id="contactForm" method="post" autocomplete="off">
        <div class="form-group">
          <label for="name">Name</label>
          <input 
            type="text" 
            id="name" 
            name="name" 
            class="form-control" 
            placeholder="Enter your name" 
            required>
        </div>

        <div class="form-group">
          <label for="email">Email Address</label>
          <input 
            type="email" 
            id="email" 
            name="email" 
            class="form-control" 
            placeholder="Enter your email" 
            required>
        </div>

        <div class="form-group">
          <label for="message">Message</label>
          <textarea 
            id="message" 
            name="message" 
            class="form-control" 
            placeholder="Write your message here..." 
            rows="4" 
            required></textarea>
        </div>

        <button type="submit" class="btn-submit">Submit</button>
      </form>

      <div class="message_box"></div>
    </div>
  </main>

  <script>
    $(document).ready(function(){
      var delay = 2000;

      $("#contactForm").on("submit", function(e){
        e.preventDefault();

        var name = $('#name').val().trim();
        var email = $('#email').val().trim();
        var message = $('#message').val().trim();

        if(name === ''){
          $('.message_box').html('<span class="error">Please enter your name!</span>');
          $('#name').focus();
          return false;
        }
        if(email === ''){
          $('.message_box').html('<span class="error">Please enter your email!</span>');
          $('#email').focus();
          return false;
        }
        if(message === ''){
          $('.message_box').html('<span class="error">Please enter your message!</span>');
          $('#message').focus();
          return false;
        }

        var emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;
        if(!email.match(emailPattern)){
          $('.message_box').html('<span class="error">Provided email address is incorrect!</span>');
          $('#email').focus();
          return false;
        }

        $.ajax({
          type: "POST",
          url: "process.php",
          data: $(this).serialize(),
          beforeSend: function(){
            $('.message_box').html('<img src="Loader.gif" width="50" height="50"/>');
          },
          success: function(data){
            setTimeout(function(){
              $('.message_box').html('<span class="success">'+data+'</span>');
            }, delay);
          },
          error: function(){
            $('.message_box').html('<span class="error">There was an error submitting the form.</span>');
          }
        });
      });
    });
  </script>
</body>
</html>
